# Consultation Format for External Resources

> **Version**: 3.2.0
> **Purpose**: Define standard formats for external resource consultations

---

## Overview

**Primary Method: Passive Context Injection**

Instead of active agent-to-agent queries, agents read `summary_for_agents.md` before starting their tasks.

**Consultation Types**:

1. **Context Injection (PRIMARY)**: Agents read summary_for_agents.md before work
2. **Resource Notification**: Informing about newly approved resources
3. **Proactive Recommendation**: Suggesting resources at phase transitions

---

## 1. Context Injection (PRIMARY METHOD)

> **All agents MUST read `output/external_resources/active/summary_for_agents.md` before starting their tasks.**

### How It Works

```
@knowledge_curator maintains → active/summary_for_agents.md
                              (updated when resources change)
                                        ↓
All agents read this file before starting their tasks
(mandated by CLAUDE.md)
                                        ↓
Agent decides whether external resources are useful
(resources are SUPPLEMENTARY - internal knowledge takes priority)
```

### summary_for_agents.md Format

```markdown
# External Resources Summary for Agents

> **Last Updated**: 2026-01-31T14:00:00Z
> **Total Resources**: 15
> **Generated By**: @knowledge_curator

---

## Quick Reference

| Agent | Recommended Resources | Priority |
|-------|----------------------|----------|
| @modeler | MAN_001, MAN_003 | HIGH |
| @researcher | MAN_002, MAN_005 | MEDIUM |
| @code_translator | MAN_001, MAN_007 | HIGH |
| @data_engineer | MAN_004 | LOW |
| @writer | MAN_002, MAN_003 | MEDIUM |

---

## By Phase

### Phase 1: Model Design
- **MAN_001**: bayesian_sir_model.py (CODE)
  - Contains: SIR implementation with Bayesian inference
  - Access: `active/MAN_001/content.py`
  - Use for: Mathematical formulation reference

### Phase 3: Data Processing
- **MAN_004**: historical_data.csv (DATASET)
  - Contains: 35 years of epidemic data
  - Access: `active/MAN_004/content.csv`

### Phase 4: Code Translation
- **MAN_001**: bayesian_sir_model.py (CODE)
- **MAN_007**: optimization_routines.py (CODE)

### Phase 7: Paper Writing
- **MAN_002**: methodology_reference.md (DOCUMENT)
- **MAN_003**: results_comparison.md (DOCUMENT)

---

## High-Value Resources (Score >= 8.0)

1. **MAN_001** - bayesian_sir_model.py (8.5/10)
   - Type: CODE/python
   - Syntax: PASSED
   - Key: Ready-to-adapt Bayesian SIR implementation
   - Path: `active/MAN_001/content.py`

2. **MAN_003** - optimization_paper.md (8.2/10)
   - Type: DOCUMENT
   - Key: Intervention optimization methodology
   - Path: `active/MAN_003/content.md`

---

## Recently Added

| ID | Title | Type | Score | Added |
|----|-------|------|-------|-------|
| MAN_007 | optimization_routines.py | CODE | 7.8 | 2026-01-31 |

---

## How to Use

1. **Check relevance**: Find your agent in "Quick Reference"
2. **Read summary**: Go to your phase section
3. **Access resource**: Use the path provided
4. **If helpful**: Use insights in your work
5. **If not helpful**: Ignore and proceed

**Note**: Resources are SUPPLEMENTARY. Internal knowledge (HMML 2.0) takes priority.
```

### Agent Integration

All agents should include this check at the start of their work:

```markdown
## Before Starting Work

1. Read `output/external_resources/active/summary_for_agents.md`
2. Check "Quick Reference" for your agent name
3. If relevant resources exist:
   - Read the summary for your phase
   - Access content files if needed
4. Proceed with work
```

---

## 2. Resource Notification

**When**: After @quality_checker approves a resource
**From**: @resource_ingestor / @quality_checker
**To**: Director (for distribution) and @knowledge_curator (for summary update)

### Format

```markdown
# External Resource Notification

## Resource Details
- **Resource ID**: MAN_20260131_abc123
- **Type**: Code (Python)
- **Title**: "bayesian_sir_model"
- **Source**: local://inbox/bayesian_sir_model.py
- **Quality Score**: 8.5/10 (APPROVED)
- **Syntax Check**: PASSED
- **SHA-256**: a1b2c3d4e5f6...
- **Process Date**: 2026-01-31

---

## Relevance to Current Problem

This resource directly provides a Bayesian SIR implementation applicable to our epidemic modeling approach. It includes:
- Mathematical formulation of SIR dynamics
- Bayesian inference using PyMC
- MCMC sampling implementation
- Convergence diagnostics

---

## Key Components

| Component | Description | For Agent |
|-----------|-------------|-----------|
| fit_model() | Main fitting function | @modeler |
| predict() | Prediction with uncertainty | @code_translator |
| plot_results() | Visualization | @visualizer |

---

## Access Paths

- **Content**: `output/external_resources/active/MAN_20260131_abc123/content.py`
- **Summary**: `output/external_resources/active/MAN_20260131_abc123/summary.md`
- **Metadata**: `output/external_resources/active/MAN_20260131_abc123/metadata.json`

---

## Action Required

@knowledge_curator: Update summary_for_agents.md to include this resource.

---

Generated by: @resource_ingestor / @quality_checker
Timestamp: 2026-01-31T14:00:00Z
```

**When**: At phase transitions
**From**: @knowledge_curator
**To**: Director (for target agent)

### Format

```markdown
# Phase 1 External Resource Recommendations

## Phase Transition
- **From**: Phase 0.5 (Methodology Gate - PASSED)
- **To**: Phase 1 (Model Design)
- **Target Agent**: @modeler
- **Generated**: 2026-01-31T16:00:00Z

---

## Context

Based on the approved methodology from Phase 0.5:
- Approach: Network-based SIR model
- Key components: Hub identification, uncertainty quantification
- Constraints: 35 years of data, 234 countries

I recommend consulting the following external resources before finalizing model design.

---

## HIGH PRIORITY Resources

### 1. WEB_001 - Network Epidemic Dynamics (8.5/10)

**Why Relevant**: Directly matches our SIR-Network approach
**Key Insight**: Hub identification algorithm improves prediction by 23%
**Must Read**: Section 3 (Mathematical Formulation)

**Access**: `output/external_resources/active/WEB_001/summary.md`

**For @modeler**:
- Equation 5-12: Network SIR formulation
- Algorithm 1: Hub detection procedure
- Table 2: Parameter sensitivity analysis

---

### 2. WEB_007 - Bayesian Parameter Estimation (8.1/10)

**Why Relevant**: Provides uncertainty quantification framework
**Key Insight**: Prior elicitation from domain experts
**Must Read**: Section 3.2 (Priors), Section 4.1 (MCMC)

**Access**: `output/external_resources/active/WEB_007/summary.md`

**For @modeler**:
- Use recommended weakly informative priors
- Plan for ~2000 MCMC samples

---

## MEDIUM PRIORITY Resources

### 3. WEB_002 - Optimization for Interventions (7.5/10)

**Why Relevant**: If intervention optimization is part of model
**Key Insight**: Integer programming formulation for resource allocation
**When to Use**: After core model is designed

**Access**: `output/external_resources/active/WEB_002/content.md`

---

### 4. WEB_005 - WHO Epidemic Data (7.2/10)

**Why Relevant**: Validation data source
**Key Insight**: Historical epidemic patterns by region
**When to Use**: During validation planning

**Access**: `output/external_resources/active/WEB_005/content.md`

---

## LOW PRIORITY (Background Only)

- WEB_008: General network theory (for context if needed)
- WEB_011: Statistical methods overview (foundational)

---

## Integration Guidance

**Before Starting Model Design**:
1. Read WEB_001 summary (5 min)
2. Note applicable formulations
3. Read WEB_007 Section 3.2 for prior guidance

**During Model Design**:
1. Reference WEB_001 Section 3 for formulations
2. Plan uncertainty quantification using WEB_007 approach
3. Consider WEB_002 if optimization component included

**After Model Design**:
1. Use WEB_005 for validation data planning

---

## Resources NOT Recommended for This Phase

- WEB_003: General statistics (not specific enough)
- WEB_012: PyMC3 tutorial (for Phase 4, not design)

---

Generated by: @knowledge_curator
Triggered by: Phase 0.5 → Phase 1 transition
File: output/docs/consultations/external_resources/recommendations/phase_1_resources.md
```

---

## File Locations

All consultation files should be stored in:

```
output/docs/consultations/external_resources/
├── notifications/
│   ├── notify_001_web_crawler.md
│   ├── notify_002_quality_checker.md
│   └── ...
├── queries/
│   ├── query_001_modeler.md
│   ├── query_002_researcher.md
│   └── ...
└── recommendations/
    ├── phase_0.5_resources.md
    ├── phase_1_resources.md
    ├── phase_3_resources.md
    └── ...
```

---

## Agent Integration

### Adding to All Agent Specifications

Each agent should include:

```markdown
## External Resource Consultation

### When to Consult
- Before making major design decisions
- When encountering unfamiliar methodology
- When needing validation references
- When seeking implementation guidance

### How to Request
```
Director, I need external resource consultation.

**Requester**: {your_agent_name}
**Phase**: {current_phase}
**Query**: {specific question}
**Urgency**: HIGH/MEDIUM/LOW
```

### How to Handle Response
1. Read recommended resources (summary first)
2. Extract relevant insights
3. Note resource ID if citing in output
4. Log access (for statistics)

### When to Ignore
- Resources not relevant to current task
- Time constraints don't allow review
- Internal knowledge (HMML 2.0) is sufficient
- Director explicitly skips consultation
```

---

## Consultation Best Practices

### For Requesters

1. **Be specific**: "Bayesian priors for SIR" not "statistics resources"
2. **Provide context**: Explain why you need this information
3. **State urgency**: So @knowledge_curator can prioritize
4. **List specific needs**: Numbered list of what you're looking for

### For @knowledge_curator

1. **Rank by relevance**: Primary > Secondary > Partial matches
2. **Provide guidance**: Not just list, but how to use
3. **Note gaps**: What's NOT available that might be needed
4. **Be concise**: Summary paths first, full content for deep dive

### For Director

1. **Route efficiently**: Don't delay queries
2. **Track usage**: Note which consultations led to action
3. **Request fetches**: If gaps identified, trigger @web_crawler
