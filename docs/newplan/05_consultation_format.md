# Consultation Format for External Resources

> **Version**: 3.2.0
> **Purpose**: Define standard formats for external resource consultations

---

## Overview

Three types of consultations:

1. **Resource Notification**: Informing about newly available resources
2. **Resource Query**: Agents requesting specific resources
3. **Proactive Recommendation**: Suggesting resources at phase transitions

---

## 1. Resource Notification

**When**: After @quality_checker approves a resource
**From**: @web_crawler / @quality_checker
**To**: Director (for distribution)

### Format

```markdown
# External Resource Notification

## Resource Details
- **Resource ID**: WEB_20260131_abc123
- **Type**: Academic Paper
- **Title**: "Network-Based SIR Models for Epidemic Prediction"
- **Source**: arXiv (https://arxiv.org/abs/2401.12345)
- **Quality Score**: 8.5/10 (APPROVED)
- **Fetch Date**: 2026-01-31

---

## Relevance to Current Problem

This resource directly addresses our SIR-Network modeling approach for the epidemic spread problem. It includes:
- Mathematical formulation of network-based SIR dynamics
- Hub identification algorithm with complexity O(n log n)
- Parameter estimation using Bayesian inference
- Validation on real-world epidemic data

---

## Key Content Sections

| Section | Content | For Agent |
|---------|---------|-----------|
| Section 2 | Literature review | @researcher |
| Section 3 | Mathematical formulation | @modeler |
| Section 4 | Parameter estimation | @modeler, @code_translator |
| Section 5 | Validation methodology | @validator |
| Appendix A | Python pseudocode | @code_translator |

---

## Suggested Consumers

| Agent | Relevant For | Recommended Action |
|-------|-------------|-------------------|
| @modeler | Mathematical formulations | Read Section 3, adapt Eq. 5-12 |
| @researcher | Literature comparison | Compare with our Phase 0 findings |
| @data_engineer | Data preprocessing | Review Section 4.1 preprocessing |
| @code_translator | Implementation | Use Appendix A as reference |

---

## Access Paths

- **Quick Summary**: `output/external_resources/active/WEB_20260131_abc123/summary.md`
- **Full Content**: `output/external_resources/active/WEB_20260131_abc123/content.md`
- **Metadata**: `output/external_resources/active/WEB_20260131_abc123/metadata.json`

---

## Action Required

Agents should consult this resource when:
- Designing network-based epidemic models (Phase 1)
- Implementing SIR dynamics on graphs (Phase 4)
- Validating model outputs (Phase 5.5)

**If not relevant to current work**: Ignore safely.

---

Generated by: @web_crawler / @quality_checker
Timestamp: 2026-01-31T14:00:00Z
File: output/docs/consultations/external_resources/notifications/notify_001.md
```

---

## 2. Resource Query

**When**: Agent needs external knowledge during their work
**From**: Any agent
**To**: Director → @knowledge_curator

### Query Format (Agent → Director)

```markdown
Director, I need external resource consultation.

**Requester**: @modeler
**Phase**: 1 (Model Design)
**Query Type**: Method Reference

**Query**: Do we have any external resources on Bayesian inference for epidemic parameter estimation?

**Specific Needs**:
1. Prior specification for transmission rates (β, γ)
2. MCMC/HMC sampling strategies
3. Convergence diagnostics (R-hat, ESS)

**Context**: I am designing the uncertainty quantification component of our SIR model and need guidance on prior selection.

**Urgency**: MEDIUM (needed before finalizing model design)
```

### Response Format (@knowledge_curator → Director → Agent)

```markdown
# Resource Query Response

## Query Information
- **Original Query**: "Bayesian inference for epidemic parameter estimation"
- **Requester**: @modeler
- **Phase**: 1 (Model Design)
- **Response Time**: 2 minutes

---

## Matching Resources

### PRIMARY MATCH: WEB_007 (Score: 9.2/10)

**Title**: "Bayesian Inference for Compartmental Models: A Practical Guide"
**Type**: Academic Paper
**Domain**: Statistics / Epidemiology
**Relevance**: DIRECT MATCH

**Key Content**:
- Section 3.2: Prior specification for β and γ
  - Weakly informative priors: β ~ HalfNormal(1), γ ~ Gamma(2, 5)
  - Domain expert elicitation methods
- Section 4.1: Hamiltonian Monte Carlo implementation
  - Stan/PyMC3 code examples
  - Tuning parameters guidance
- Section 5: Convergence diagnostics
  - R-hat interpretation (target < 1.01)
  - Effective sample size (target > 400)

**Access**:
- Summary: `output/external_resources/active/WEB_007/summary.md`
- Full: `output/external_resources/active/WEB_007/content.md`

---

### SECONDARY MATCH: WEB_012 (Score: 7.8/10)

**Title**: "PyMC3 for Epidemic Modeling: A Tutorial"
**Type**: Tutorial
**Domain**: Machine Learning / Epidemiology
**Relevance**: IMPLEMENTATION FOCUSED

**Key Content**:
- Complete PyMC3 model specification
- ODE integration with Bayesian framework
- Real-world example with COVID-19 data

**Access**: `output/external_resources/active/WEB_012/content.md`

---

### PARTIAL MATCH: WEB_003 (Score: 6.5/10)

**Title**: "Uncertainty Quantification in Mathematical Models"
**Type**: Methodology
**Domain**: Statistics
**Relevance**: GENERAL (may require adaptation)

**Key Content**:
- General UQ framework (not epidemic-specific)
- Sensitivity analysis methods

**Access**: `output/external_resources/active/WEB_003/summary.md`

---

## Usage Recommendation

For your specific needs:

1. **Prior Specification** (Need #1):
   - Start with WEB_007, Section 3.2
   - Use recommended priors as starting point

2. **MCMC/HMC Sampling** (Need #2):
   - WEB_007, Section 4.1 for theory
   - WEB_012 for PyMC3 implementation

3. **Convergence Diagnostics** (Need #3):
   - WEB_007, Section 5 has detailed guidance

**Suggested Reading Order**:
1. WEB_007 summary (5 min)
2. WEB_007 Section 3.2 and 4.1 (15 min)
3. WEB_012 for code examples (10 min)

---

## No Resources Found For

- Real-time epidemic data APIs (not in our collection)
- Specific country-level prior calibration (suggest domain expert consultation)

**Recommendation**: If these are needed, request @web_crawler to search for them.

---

Generated by: @knowledge_curator
Timestamp: 2026-01-31T15:30:00Z
File: output/docs/consultations/external_resources/queries/query_003_modeler.md
```

---

## 3. Proactive Recommendation

**When**: At phase transitions
**From**: @knowledge_curator
**To**: Director (for target agent)

### Format

```markdown
# Phase 1 External Resource Recommendations

## Phase Transition
- **From**: Phase 0.5 (Methodology Gate - PASSED)
- **To**: Phase 1 (Model Design)
- **Target Agent**: @modeler
- **Generated**: 2026-01-31T16:00:00Z

---

## Context

Based on the approved methodology from Phase 0.5:
- Approach: Network-based SIR model
- Key components: Hub identification, uncertainty quantification
- Constraints: 35 years of data, 234 countries

I recommend consulting the following external resources before finalizing model design.

---

## HIGH PRIORITY Resources

### 1. WEB_001 - Network Epidemic Dynamics (8.5/10)

**Why Relevant**: Directly matches our SIR-Network approach
**Key Insight**: Hub identification algorithm improves prediction by 23%
**Must Read**: Section 3 (Mathematical Formulation)

**Access**: `output/external_resources/active/WEB_001/summary.md`

**For @modeler**:
- Equation 5-12: Network SIR formulation
- Algorithm 1: Hub detection procedure
- Table 2: Parameter sensitivity analysis

---

### 2. WEB_007 - Bayesian Parameter Estimation (8.1/10)

**Why Relevant**: Provides uncertainty quantification framework
**Key Insight**: Prior elicitation from domain experts
**Must Read**: Section 3.2 (Priors), Section 4.1 (MCMC)

**Access**: `output/external_resources/active/WEB_007/summary.md`

**For @modeler**:
- Use recommended weakly informative priors
- Plan for ~2000 MCMC samples

---

## MEDIUM PRIORITY Resources

### 3. WEB_002 - Optimization for Interventions (7.5/10)

**Why Relevant**: If intervention optimization is part of model
**Key Insight**: Integer programming formulation for resource allocation
**When to Use**: After core model is designed

**Access**: `output/external_resources/active/WEB_002/content.md`

---

### 4. WEB_005 - WHO Epidemic Data (7.2/10)

**Why Relevant**: Validation data source
**Key Insight**: Historical epidemic patterns by region
**When to Use**: During validation planning

**Access**: `output/external_resources/active/WEB_005/content.md`

---

## LOW PRIORITY (Background Only)

- WEB_008: General network theory (for context if needed)
- WEB_011: Statistical methods overview (foundational)

---

## Integration Guidance

**Before Starting Model Design**:
1. Read WEB_001 summary (5 min)
2. Note applicable formulations
3. Read WEB_007 Section 3.2 for prior guidance

**During Model Design**:
1. Reference WEB_001 Section 3 for formulations
2. Plan uncertainty quantification using WEB_007 approach
3. Consider WEB_002 if optimization component included

**After Model Design**:
1. Use WEB_005 for validation data planning

---

## Resources NOT Recommended for This Phase

- WEB_003: General statistics (not specific enough)
- WEB_012: PyMC3 tutorial (for Phase 4, not design)

---

Generated by: @knowledge_curator
Triggered by: Phase 0.5 → Phase 1 transition
File: output/docs/consultations/external_resources/recommendations/phase_1_resources.md
```

---

## File Locations

All consultation files should be stored in:

```
output/docs/consultations/external_resources/
├── notifications/
│   ├── notify_001_web_crawler.md
│   ├── notify_002_quality_checker.md
│   └── ...
├── queries/
│   ├── query_001_modeler.md
│   ├── query_002_researcher.md
│   └── ...
└── recommendations/
    ├── phase_0.5_resources.md
    ├── phase_1_resources.md
    ├── phase_3_resources.md
    └── ...
```

---

## Agent Integration

### Adding to All Agent Specifications

Each agent should include:

```markdown
## External Resource Consultation

### When to Consult
- Before making major design decisions
- When encountering unfamiliar methodology
- When needing validation references
- When seeking implementation guidance

### How to Request
```
Director, I need external resource consultation.

**Requester**: {your_agent_name}
**Phase**: {current_phase}
**Query**: {specific question}
**Urgency**: HIGH/MEDIUM/LOW
```

### How to Handle Response
1. Read recommended resources (summary first)
2. Extract relevant insights
3. Note resource ID if citing in output
4. Log access (for statistics)

### When to Ignore
- Resources not relevant to current task
- Time constraints don't allow review
- Internal knowledge (HMML 2.0) is sufficient
- Director explicitly skips consultation
```

---

## Consultation Best Practices

### For Requesters

1. **Be specific**: "Bayesian priors for SIR" not "statistics resources"
2. **Provide context**: Explain why you need this information
3. **State urgency**: So @knowledge_curator can prioritize
4. **List specific needs**: Numbered list of what you're looking for

### For @knowledge_curator

1. **Rank by relevance**: Primary > Secondary > Partial matches
2. **Provide guidance**: Not just list, but how to use
3. **Note gaps**: What's NOT available that might be needed
4. **Be concise**: Summary paths first, full content for deep dive

### For Director

1. **Route efficiently**: Don't delay queries
2. **Track usage**: Note which consultations led to action
3. **Request fetches**: If gaps identified, trigger @web_crawler
