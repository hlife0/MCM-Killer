# MODEL Gate Validation Report - Feasibility Checker

| 字段 | 值 |
|------|------|
| Gate | MODEL |
| 验证者 | feasibility_checker |
| 验证对象 | model_design_1.md, research_notes_1.md |
| 验证次数 | 1 |
| 时间 | 2026-01-06T05:32:00 CET |
| 结果 | **CONDITIONAL** |

---

## 验证维度

### 1. 计算可行性

#### 1.1 数据规模评估

**实际数据规模**：
- 总观测数：1,435 条（国家-年份记录）
- 唯一国家：210 个
- 时间点：30 届奥运会（1896-2024）
- 平均国家观测数：6.8 个/国
- 2024年参赛国：91 个
- 运动员记录：252,565 条（用于教练效应分析）

**模型复杂度**：
- **参数数量估算**：
  - 固定效应：约 20 个（β, γ 系数）
  - 国家随机效应：210 × 3 = 630 个（u₀, v₁, w）
  - 超参数：约 6 个（σᵤ, σᵥ, σᵥ, θ 等）
  - **总计约 656 个参数**

#### 1.2 Stan HMC 计算时间评估

**理论计算时间**：
- 标准Stan公式：时间 ∝ (数据量 × 参数数 × 迭代数) / (采样效率)
- 估计时间：**2-6 小时**（模型设计文档中的估计）

**实际可行性分析**：

| 因素 | 评估 | 影响 |
|------|------|------|
| 数据量（1,435观测） | ✅ 适中 | 每次迭代快 |
| 参数数（656个） | ⚠️ 较高 | 降低采样效率 |
| 国家异质性（高方差） | ⚠️ 较高 | 可能需要更多warmup |
| 零膨胀（33.9%零金牌） | ✅ 可处理 | 增加模型复杂度 |
| 时间趋势（128年） | ⚠️ 非平稳性 | 可能导致收敛慢 |

**计算时间重新估算**：
- **乐观估计**：4-6 小时（如果收敛顺利）
- **现实估计**：**8-12 小时**（考虑调试、重跑、模型比较）
- **悲观估计**：12-24 小时（如果遇到收敛问题）

**风险评估**：
- ⚠️ **中等风险**：计算时间可能超出最初估计
- 建议预留 **至少 12-16 小时** 计算时间

#### 1.3 内存需求评估

**内存需求估算**：
- 4条链 × 1000次采样 × 656个参数 × 8字节 ≈ **21 MB**（仅后验样本）
- 数据预处理、中间结果：约 100-500 MB
- **总计：1-2 GB RAM**

**评估**：
- ✅ **远低于 8GB RAM 限制**
- ✅ 内存需求非常合理
- ✅ 可在标准笔记本电脑上运行

---

### 2. 数据可行性

#### 2.1 数据充足性评估

**面板数据结构**：
- ✅ **时间维度充足**：30 个时间点（1896-2024），足够估计时间趋势
- ✅ **截面维度充足**：210 个国家，足够估计国家异质性
- ⚠️ **不平衡面板**：平均仅 6.8 个观测/国，中位数仅 3 个

**零膨胀处理**：
- ✅ 零金牌比例：33.9%（显著零膨胀）
- ✅ 零膨胀模型**完全适用**
- ✅ 有足够的非零观测估计零膨胀机制

#### 2.2 特征工程可行性

**核心特征评估**：

| 特征 | 可行性 | 说明 |
|------|--------|------|
| gold_lag1, gold_lag2 | ✅ 可行 | 直接从 medal_counts 计算 |
| total_lag1 | ✅ 可行 | 直接计算 |
| host_flag | ✅ 可行 | 从 hosts.csv 匹配 |
| events_count | ✅ 可行 | 从 programs.csv 获取 |
| year_normalized | ✅ 可行 | 简单标准化 |
| past_success | ✅ 可行 | 从历史数据计算 |

**项目层面特征**：
- ✅ 可行：使用 athletes.csv 的 Sport, Event 字段
- ⚠️ 需要复杂的数据处理（国家-项目匹配）

**教练效应特征**：
- ❌ **关键问题**：数据集中**无直接"教练"字段**
- ⚠️ **间接推断可行**：需要通过运动员流动、跨国教练变化来推断
- ⚠️ **工作量大**：需要复杂的特征工程

#### 2.3 缺失值处理策略

**数据完整性检查**：
- ✅ medal_counts.csv：无缺失值（已验证）
- ✅ athletes.csv：无缺失值（已验证）
- ✅ 主要数据源非常干净

**缺失值来源**：
- 国家未参赛某届奥运会：结构化缺失，可处理
- 国家名称变化（如 "West Germany" → "Germany"）：需要标准化

**评估**：
- ✅ 缺失值策略**合理且可实施**
- ✅ 多重插补或删除都是可行选项

---

### 3. 方法可行性

#### 3.1 零膨胀负二项模型可识别性

**可识别性条件**：
1. ✅ **数据量充足**：1,435 观测 >> 656 参数（约 2.2 观测/参数）
2. ✅ **零膨胀显著**：33.9% 零值 > 10%（经验阈值），适合零膨胀模型
3. ⚠️ **观测/参数比偏低**：理想情况应 ≥ 5-10

**可识别性风险评估**：
- ⚠️ **中等风险**：观测/参数比（2.2）偏低
- ⚠️ 可能导致：
  - 部分国家随机效应估计不稳定
  - 零膨胀参数 π 与计数参数 μ 的分离可能不完全

**缓解策略**：
- ✅ **分层先验**（已在模型中）：通过 shrinkage 提高可识别性
- ✅ **强先验**：考虑使用更信息化的先验（如 N(0,5) → N(0,3)）
- ✅ **模型简化**：必要时减少随机效应复杂度

#### 3.2 随机效应估计可行性

**国家随机效应（u₀ᵢ, v₁ᵢ, wᵢ）**：
- ✅ **理论可行**：210 个国家足够估计群体方差
- ⚠️ **实际挑战**：
  - 53 个国家有 ≥10 观测（可估计稳定随机效应）
  - 157 个国家有 <10 观测（随机效应高度依赖 shrinkage）

**评估**：
- ✅ **贝叶斯分层结构的优势**：通过 shrinkage，小样本国家的随机效应会被拉向群体均值
- ✅ 这是**贝叶斯方法的核心优势**，比频率方法更可行
- ⚠️ 但小样本国家的预测区间会更宽（不确定性更大）

#### 3.3 教练效应合成控制方法可行性

**数据可用性**：
- ❌ **无直接教练数据**：数据集中无 "Coach" 字段
- ⚠️ **需要间接推断**：
  - 方法 1：通过运动员跨国流动推断教练流动
  - 方法 2：通过文献搜索确定著名教练案例，再在数据中找对应
  - 方法 3：通过成绩突变事件反推教练效应

**合成控制方法的可行性**：
- ✅ **理论可行**：有 210 个国家可作为对照池
- ⚠️ **实际挑战**：
  - 需要找到"处理组"（聘请著名教练的国家-项目组合）
  - 需要足够的前处理期数据（至少 3-4 届奥运会）
  - 需要匹配变量（历史奖牌、项目参与度等）

**可行性评估**：
- ⚠️ **中等风险**：完全可行的概率约 **60-70%**
- 原因：
  1. 数据集中无直接教练信息，需要额外文献调研
  2. 可能找到的著名教练案例数量有限（可能 < 5 个）
  3. 每个案例的数据质量参差不齐

**替代方案**：
- ✅ 如果合成控制不可行，可转为**相关性分析**：
  - 分析教练流动年份的成绩变化
  - 使用 Difference-in-Differences（DiD）
  - 提供定性分析而非严格的因果识别

---

### 4. 时间可行性

#### 4.1 总体项目时间线评估

**MCM 竞赛时间限制**：
- 标准竞赛时间：**4-5 天**（96-120 小时）
- 各阶段时间分配（假设）：
  - Phase 0-1: 问题理解 + 模型设计：**12-18 小时**
  - Phase 2-3: 可行性检查 + 数据处理：**8-12 小时**
  - **Phase 4-5: 代码 + 训练（计算密集）**
  - Phase 6-7: 可视化 + 论文：**18-24 小时**
  - Phase 8-10: 总结 + 润色：**6-10 小时**

**Phase 4-5 时间瓶颈**：
- 模型训练：**8-12 小时**（重新估算）
- 代码调试：**4-8 小时**（首次实现复杂模型）
- 模型比较（多个模型）：**4-6 小时**
- **总计：16-26 小时**

**评估**：
- ⚠️ **紧张但可行**：如果一切顺利，总计约 70-90 小时
- ⚠️ **高风险场景**：如果模型需要多次返工，可能超过时间限制

#### 4.2 计算时间 vs. 项目时间线

**乐观场景**：
- 模型训练：8 小时
- 代码调试：4 小时
- 总计：12 小时
- ✅ **可行**

**现实场景**：
- 模型训练：12 小时
- 代码调试：8 小时
- 返工一次（重跑）：6 小时
- 总计：26 小时
- ⚠️ **紧张但可控**

**悲观场景**：
- 模型训练：24 小时（收敛问题）
- 代码调试：12 小时
- 多次返工：12 小时
- 总计：48 小时
- ❌ **可能影响其他阶段**

#### 4.3 时间缓冲建议

**建议策略**：
1. **优先级排序**：
   - ✅ 优先完成金牌模型（核心）
   - ✅ 其次完成总奖牌模型
   - ⚠️ 教练效应分析可降级为"加分项"

2. **并行化**：
   - ✅ 使用多链并行（4链 → 减少至 1/4 时间）
   - ✅ 金牌模型和总奖牌模型可并行训练（如果有 2 台机器）

3. **提前准备**：
   - ✅ 预处理代码提前准备好
   - ✅ Baseline 模型先跑起来（作为 backup）

4. **分阶段提交**：
   - ✅ 先完成简化模型（Poisson GLM）
   - ✅ 再逐步增加复杂度（NB → ZINB → Hierarchical）

---

## 风险评估

### 风险矩阵

| 风险 | 概率 | 影响 | 严重程度 | 缓解策略 |
|------|------|------|----------|----------|
| **1. 计算时间超限** | 中 (40%) | 高 | 🔴 **高** | 增加时间预算、考虑 Variational Bayes |
| **2. 模型不收敛** | 中 (35%) | 高 | 🔴 **高** | 简化模型、使用强先验、增加 warmup |
| **3. 零膨胀参数不可识别** | 低 (20%) | 中 | 🟡 中 | 使用更信息化的先验、模型简化 |
| **4. 教练效应无法识别** | 中 (40%) | 中 | 🟡 中 | 准备降级方案（相关性分析） |
| **5. 小样本国家预测不准** | 高 (60%) | 低 | 🟢 低 | 接受更宽预测区间（贝叶斯优势） |
| **6. 数据处理错误** | 低 (15%) | 高 | 🟡 中 | 严格的数据验证、单元测试 |
| **7. 时间序列外推失败** | 中 (30%) | 中 | 🟡 中 | 使用保守预测区间、敏感性分析 |

### 关键风险详解

#### 🔴 风险 1: 计算时间超限

**表现**：
- Stan HMC 采样时间 > 12 小时
- 模型调试需要多次重跑
- 总时间超过 48 小时，影响论文撰写

**根本原因**：
- 参数数较多（656 个）
- 国家异质性高，后验复杂
- 零膨胀模型探索慢

**缓解策略**：

**策略 A（推荐）**：使用 Variational Bayes (VB) 近似
- 优势：速度快 10-100 倍（30 分钟 vs 8 小时）
- 劣势：近似精度不确定
- 使用方式：
  1. 先用 VB 快速迭代模型
  2. 确定模型规格后，用 HMC 做最终推断
  3. 或用 VB 结果作为 HMC 的初值

**策略 B**：简化模型规格
- 减少随机效应复杂度：
  - 从 u₀ᵢ + v₁ᵢ · Year → 仅 u₀ᵢ（随机截距）
  - 移除部分交互项
- 预计提速：2-3 倍

**策略 C**：使用更快的工具
- **cmdstanr**（R）比 **rstan** 快 2-3 倍
- **NumPyro**（Python JAX backend）比 Stan 快 5-10 倍
- 但需要更多开发时间

**策略 D**：并行化
- 4 链并行：理论可减少至 1/4 时间（单机 4 核）
- 多机并行：如果有 2-4 台机器

**建议**：
- ✅ **主要使用策略 A（VB）**：在迭代阶段使用 VB，最终模型用 HMC
- ✅ **辅助使用策略 B**：准备简化模型版本作为 backup
- ✅ **实施策略 C**：使用 cmdstanr 而非 rstan

---

#### 🔴 风险 2: 模型不收敛

**表现**：
- $\hat{R} > 1.01$（甚至 > 1.1）
- ESS < 400
- 后验轨迹图显示不混合
- 能量图显示发散

**根本原因**：
- 参数空间复杂，后验分布多峰
- 零膨胀与计数过程分离不清
- 随机效应导致几何复杂度

**缓解策略**：

**策略 A（首选）**：使用强先验
- 当前：$\beta_k \sim N(0, 10)$（弱信息）
- 建议：$\beta_k \sim N(0, 3)$ 或 $N(0, 5)$（更强）
- 效果：约束参数空间，提高可识别性

**策略 B**：重新参数化
- 使用非中心化参数化（non-centered parameterization）：
  ```
  uᵢ ~ N(0, σᵤ)
  → uᵢ = σᵤ · zᵢ, zᵢ ~ N(0, 1)
  ```
- 效果：显著提高 HMC 采样效率

**策略 C**：增加 warmup
- 当前：1000 次 warmup
- 建议：1500-2000 次 warmup
- 效果：更充分探索后验空间

**策略 D**：模型简化
- 如果不收敛，移除部分随机效应
- 例如：移除 v₁ᵢ（随机斜率），保留 u₀ᵢ（随机截距）

**建议**：
- ✅ **立即实施策略 A 和 B**
- ✅ 准备好策略 D（简化模型版本）

---

#### 🟡 风险 4: 教练效应无法识别

**表现**：
- 无法在数据中找到足够的"著名教练"案例
- 合成控制方法无法构建合适的对照
- placebo test 显示效应不显著

**根本原因**：
- 数据集无直接教练信息
- 历史教练流动信息有限
- 选择偏差（优秀教练选择有潜力的国家）

**缓解策略**：

**降级方案 1**：相关性分析
- 分析教练流动年份的成绩变化
- 使用描述性统计而非因果推断
- 示例：
  - 识别教练跨国流动事件（通过运动员）
  - 计算流动前后 2 届奥运会的奖牌变化
  - 与未流动国家对比
- 可行性：✅ 高

**降级方案 2**：案例研究
- 选择 1-2 个著名教练案例（从文献调研）
- 深入分析这一个案例
- 使用定性 + 定量分析
- 示例：
  - 案例：中国女排教练郎平（1996-2000, 2016-2021）
  - 使用合成控制估计效应
  - 结合访谈、新闻报道等定性证据
- 可行性：✅ 中

**降级方案 3**：反事实分析
- 使用主模型预测"无教练效应"的奖牌数
- 与实际观测对比
- 计算"残差"作为教练效应的代理
- 可行性：✅ 高

**建议**：
- ✅ **优先尝试完整方法**（合成控制）
- ✅ **准备降级方案 1**（相关性分析）作为 fallback
- ⚠️ 如果完整方法失败，在论文中**诚实说明**：
  > "由于数据限制，我们无法严格识别教练的因果效应。以下分析展示的是相关性，而非因果性。"

---

## 验证结论

### 总体评估: **CONDITIONAL**（有条件通过）

**通过理由**：
1. ✅ **核心方法可行**：贝叶斯零膨胀分层负二项模型**理论上完全适用**
2. ✅ **数据充足**：1,435 观测支持模型估计（虽紧张但足够）
3. ✅ **特征工程可实现**：所有必需特征均可从数据中计算
4. ✅ **内存需求合理**：1-2 GB RAM，远低于 8GB 限制

**条件（必须满足）**：
1. ⚠️ **必须优化计算时间**：
   - 使用 Variational Bayes 在迭代阶段加速
   - 使用 cmdstanr 而非 rstan
   - 预留 12-16 小时计算时间（而非 2-6 小时）

2. ⚠️ **必须准备降级方案**：
   - 如果 HMC 不收敛或太慢，简化模型规格
   - 如果教练效应无法识别，降级为相关性分析
   - 准备一个"简化版 baseline"（如 Poisson GLM）

3. ⚠️ **必须使用强先验和正则化**：
   - 使用 N(0, 3) 或 N(0, 5) 而非 N(0, 10)
   - 使用非中心化参数化
   - 增加至 1500-2000 次 warmup

4. ⚠️ **必须分阶段实施**：
   - 先跑 Baseline（Poisson）
   - 再跑 NB（检查 overdispersion）
   - 再跑 ZINB（检查零膨胀）
   - 最后跑完整 Hierarchical ZINB

### 不建议当前设计直接通过的原因

**不建议直接通过（即 REJECTED）的理由**：
- ⚠️ 原估计"2-6 小时"过于乐观，实际可能需要 **8-12 小时**甚至更多
- ⚠️ 观测/参数比（2.2）偏低，可能导致部分参数不稳定
- ⚠️ 教练效应识别有 40% 概率失败，需要明确降级方案

**不建议无条件通过（即 APPROVED）的理由**：
- ⚠️ 需要明确优化计算时间的具体措施
- ⚠️ 需要明确收敛问题的应对策略
- ⚠️ 需要明确教练效应分析的 fallback 方案

---

## 建议

### 给 Modeler 的修改建议

#### 建议 1: 更新计算资源估计（必须）

**当前文档（model_design_1.md, Line 339-341）**：
> **内存**：至少 8GB RAM（用于存储后验样本）
> **时间**：完整模型可能需要 2-6 小时运行

**建议修改为**：
> **内存**：1-2 GB RAM（实际需求远低于 8GB）
> **时间**：
> - Baseline 模型（Poisson）：1-2 小时
> - NB 模型：2-4 小时
> - 完整 ZINB 分层模型：**8-12 小时**（乐观），12-24 小时（调试）
> - **建议预留 16-24 小时**（包含模型比较、返工）
>
> **加速策略**：
> - 迭代阶段使用 Variational Bayes（快 10-100 倍）
> - 最终模型使用 HMC
> - 使用 cmdstanr（比 rstan 快 2-3 倍）
> - 4 链并行（减少至 1/4 时间）

#### 建议 2: 添加模型简化策略（必须）

**在文档中添加新章节"12.5 模型简化策略"**：

```markdown
### 12.5 模型简化策略（降级方案）

如果完整模型遇到以下问题，按顺序简化：

**Level 0: 完整模型**（目标）
- Zero-Inflated Hierarchical NB
- 随机截距 u₀ᵢ + 随机斜率 v₁ᵢ
- 自回归项

**Level 1: 移除随机斜率**
- 保留随机截距 u₀ᵢ
- 移除 v₁ᵢ · Year

**Level 2: 标准零膨胀 NB**
- 移除所有随机效应
- 仅固定效应 + 零膨胀

**Level 3: 标准 NB**
- 移除零膨胀
- 仅 NB 回归

**Level 4: Poisson GLM**
- 最简单 baseline
- 快速诊断

何时降级？
- 如果 HMC > 24 小时不收敛 → Level 1
- 如果 Level 1 仍不收敛 → Level 2
- 如果零膨胀参数 π 接近 0 或 1 → Level 3
```

#### 建议 3: 更新先验分布（强烈建议）

**当前先验**（Line 122-125）：
> $\beta_{Gold,k} \sim N(0, 10)$
> $\gamma_{Gold,k} \sim N(0, 5)$
> $\theta_{Gold} \sim \text{Gamma}(2, 0.1)$

**建议修改为**：
> $\beta_{Gold,k} \sim \mathcal{N}(0, 3)$ （更强正则化）
> $\gamma_{Gold,k} \sim \mathcal{N}(0, 3)$ （更强正则化）
> $\theta_{Gold} \sim \text{Gamma}(2, 0.5)$ （更保守的离散度）

**理由**：
- 更强先验帮助参数可识别性
- 减少过拟合风险（观测/参数比偏低）
- 加速收敛

#### 建议 4: 添加教练效应降级方案（必须）

**在文档中添加"9.4 降级方案"**：

```markdown
### 9.4 教练效应分析的降级方案

**主要方法**：合成控制（Synthetic Control）
- 适用场景：可找到明确的教练流动案例

**降级方案 1**：相关性分析
- 识别教练跨国流动事件
- 计算流动前后奖牌变化
- 使用描述性统计和可视化

**降级方案 2**：案例研究
- 选择 1-2 个著名教练案例（从文献）
- 深入分析单一案例
- 结合定性证据

**降级方案 3**：反事实分析
- 使用主模型预测"无教练效应"的奖牌数
- 残差作为教练效应的代理
- 承认这是相关性而非因果性

**触发条件**：
- 如果数据集中无法识别 ≥3 个教练案例 → 降级方案 1
- 如果合成控制无法匹配 → 降级方案 2
- 如果时间不足 → 降级方案 3
```

#### 建议 5: 添加模型收敛诊断计划（强烈建议）

**在"11.2 后验预测检验"后添加"11.4 收敛诊断"**：

```markdown
### 11.4 收敛诊断（必须）

**诊断指标**：
1. $\hat{R}$ (R-hat)：所有参数 < 1.01（理想 < 1.005）
2. ESS (Effective Sample Size)：所有参数 > 400
3. 能量图：无发散转移
4. 轨迹图：良好的混合性

**收敛标准**：
- 所有参数 $\hat{R} < 1.01$
- > 95% 参数 ESS > 400
- 无发散转移

**未收敛时的应对**：
1. 增加 warmup 至 1500-2000
2. 使用强先验（N(0,3)）
3. 使用非中心化参数化
4. 简化模型规格

**诊断工具**：
- `bayesplot::mcmc_trace()`
- `bayesplot::mcmc_rhat()`
- `bayesplot::mcmc_neff()`
- `cmdstanr::cmdstan_diagnose()`
```

#### 建议 6: 添加实施时间线（建议）

**在"10.3 代码结构"后添加"10.4 实施时间线"**：

```markdown
### 10.4 实施时间线（预估）

**Phase 4: Code Translation**
- 数据预处理代码：2-3 小时
- Stan 模型代码：4-6 小时
- 调试和测试：4-8 小时
- **总计：10-17 小时**

**Phase 5: Model Training**
- Baseline (Poisson)：1-2 小时
- NB 模型：2-4 小时
- ZINB 模型：2-4 小时
- 完整 Hierarchical ZINB：**8-12 小时**
- 模型比较和验证：2-4 小时
- **总计：15-26 小时**

**总时间缓冲**：
- 乐观：25 小时
- 现实：43 小时
- 建议预留：**48 小时**（2 天）

**加速策略**：
- 使用 VB 在迭代阶段（节省 80% 时间）
- 并行运行金牌和总奖牌模型（如果有 2 台机器）
- 准备简化模型版本（Level 1-3）
```

---

### 给 Director 的建议

1. **当前阶段决策**：
   - ✅ **允许进入 Phase 2**（Feasibility Check）
   - ⚠️ 但需要 Modeler 根据上述建议修改 model_design_1.md
   - ⚠️ 在 Phase 3 (Data Processing) 时，data_engineer 需要特别注意教练效应特征的构造

2. **Phase 5 (Training) 监控**：
   - 设置计算时间阈值（如 12 小时）
   - 如果超过阈值，建议切换到简化模型
   - 保留计算日志，用于论文写作

3. **风险预案**：
   - 如果 Phase 5 耗时超过 24 小时，考虑：
     - 跳过教练效应的因果识别，降级为相关性分析
     - 使用 VB 近似结果（在论文中说明）
     - 简化模型至 Level 1 或 Level 2

4. **质量 vs 时间权衡**：
   - **优先保证**：
     1. 完成金牌和总奖牌预测（核心需求）
     2. 提供合理的预测区间
   - **次要目标**：
     3. 首次获奖国家预测
     4. 项目-奖牌关系分析
   - **加分项**：
     5. 教练效应因果识别（如果时间允许）

---

### 给 Code Translator 的预提示

**在 Phase 4 (Code Translation) 开始前，告知**：
1. **使用 cmdstanr**（R）或 **cmdstanpy**（Python），不要使用 rstan
2. **准备两套代码**：
   - 完整版：Hierarchical ZINB
   - 简化版：Poisson GLM（作为 backup）
3. **实现 Variational Bayes 选项**：
   - 在 Stan 代码中添加 VB 支持
   - 用于快速迭代和调试
4. **实现非中心化参数化**：
   - 提高采样效率
   - 示例：
     ```stan
     // 中心化（可能慢）
     u[i] ~ normal(0, sigma_u);

     // 非中心化（推荐）
     z[i] ~ normal(0, 1);
     u[i] = sigma_u * z[i];
     ```

---

### 给 Data Engineer 的预提示

**在 Phase 3 (Data Processing) 开始前，告知**：
1. **重点处理国家名称标准化**：
   - "West Germany" → "Germany"
   - "Soviet Union" → "Russia"（部分继承）
   - 提供国家名称映射表
2. **优先构造核心特征**：
   - gold_lag1, gold_lag2, total_lag1
   - host_flag, events_count, year_normalized
   - past_success
3. **教练效应特征构造**：
   - 尝试从 athletes.csv 识别跨国流动
   - 如果无法识别，准备降级方案
   - 不在特征工程上花费过多时间（< 4 小时）

---

## 附录

### A. 计算时间详细估算

**Stan HMC 时间公式**：
```
T_total = N_chains × N_iterations × T_per_iter
```

**估算**：
- N_chains = 4
- N_iterations = 2000 (1000 warmup + 1000 sampling)
- T_per_iter ≈ 1-2 ms（对于 656 参数模型）
- T_total ≈ 4 × 2000 × 0.001 = 8 秒（理想情况）

**实际时间（考虑低效率）**：
- 采样效率（有效样本率）：约 10-30%（零膨胀模型通常偏低）
- 实际采样时间 = 8 秒 / 0.2 = 40 秒 / 1000 次迭代
- 总时间 = 4 × 2000 × 0.04 = 320 秒 ≈ 5-6 分钟

**但实际中需要考虑**：
- Stan 编译时间：1-2 分钟
- Warmup 阶段更慢（探索阶段）
- 数据加载、后处理：1-2 分钟
- **单次运行：10-20 分钟**

**为什么实际需要 8-12 小时？**
1. 调试阶段：可能需要重跑 10-20 次 → 2-4 小时
2. 模型比较：至少 3-4 个模型（Poisson, NB, ZINB, Hierarchical）→ 2-4 小时
3. 最终模型：可能需要 2-4 次调整（收敛、先验）→ 2-4 小时
4. 预测和验证：1-2 小时
5. **总计：8-14 小时**

### B. 观测/参数比分析

**理想情况**：
- 频率统计：≥ 10-20 观测/参数
- 贝叶斯：≥ 5-10 观测/参数（分层结构可更低）

**当前模型**：
- 观测数：1,435
- 参数数：656
- **比率：2.2**（偏低）

**为什么仍可工作？**
1. **分层先验的 shrinkage**：小样本国家的参数被拉向群体均值
2. **零膨胀模型的结构**：π 和 μ 有不同的数据信息
3. **贝叶斯方法的优势**：即使比率低，后验仍可估计（虽不确定性大）

**潜在问题**：
- 小样本国家的随机效应估计不稳定
- 零膨胀参数 π 可能与 μ 交换（identifiability 问题）

**缓解**：
- ✅ 强先验
- ✅ 分层 shrinkage（已在模型中）
- ✅ 模型简化（如果需要）

### C. 教练效应数据可用性评估

**数据集中的可用信息**（athletes.csv）：
- Name（运动员姓名）
- NOC（国家）
- Year（年份）
- Sport, Event（项目）
- Medal（奖牌）

**无法直接获得**：
- ❌ Coach（教练）
- ❌ 教练国籍
- ❌ 教练流动历史

**间接推断方法**：
1. **运动员跨国流动**：
   - 如果运动员在 2012 年代表 A 国，2016 年代表 B 国
   - 可能是教练流动（或运动员转会）
   - 需要结合新闻/文献验证

2. **成绩突变**：
   - 如果某国某项目成绩突然提升
   - 可能是聘请教练（也可能是其他原因）
   - 需要排除其他因素（主办国、投资增加）

3. **文献调研**：
   - 搜索著名教练案例（如郎平、郎平等）
   - 在数据中定位对应国家和年份
   - 估计效应

**可行性评估**：
- 方法 1：⚠️ 60% 可行（需要大量数据处理）
- 方法 2：⚠️ 40% 可行（归因困难）
- 方法 3：✅ 80% 可行（但依赖外部资料）

**建议**：
- ✅ **优先使用方法 3**（文献调研）
- ⚠️ 准备降级方案（相关性分析）

---

**报告生成时间**: 2026-01-06T05:32:00 CET
**Feasibility Checker**: v1
**下一步**: 等待 Modeler 修改 model_design，或 Director 决策是否进入 Phase 2
